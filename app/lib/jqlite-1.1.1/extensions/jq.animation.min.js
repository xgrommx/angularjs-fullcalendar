/*
 * jqAnimation - Animation extension for jQLite
 *
 * Many thanks to the jQuery team's efforts.  Code is
 * Copyright (c) 2010, John Resig.  See
 * http://jquery.org/license
 *
 * This extension is actually the jQuery FX engine as a plugin.  There have been
 * some minor changes to make it less dependent on determining if it works in IE,
 * plus some other additional changes.  But for the most part, this is FX.  The
 * "toggle" type of animation for show/hide isn't supported.
 *
 * @author Brett Fattori (bfattori@gmail.com)
 * @author $Author: bfattori $
 * @version $Revision: 108 $
 *
 * Created: 04/28/2010
 * Modified $Date: 2010-05-18 16:03:35 -0400 (Tue, 18 May 2010) $
 */
(function(d){function m(a,b){var e={};d.each(s.concat.apply([],s.slice(0,b)),function(){e[this]=a});return e}var u=/z-?index|font-?weight|opacity|zoom|line-?height/i,t=document.defaultView||{};d.props={"for":"htmlFor","class":"className","float":"cssFloat",cssFloat:"cssFloat",styleFloat:"cssFloat",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};d.extend({queue:function(a,b,e){if(a){b=(b||"fx")+"queue";var c=d.data(a,b);if(!c||d.isArray(e))c=
d.data(a,b,d.makeArray(e));else e&&c.push(e)}return c},dequeue:function(a,b){var e=d.queue(a,b),c=e.shift();if(!b||b==="fx")c=e[0];c!==undefined&&c.call(a)},attr:function(a,b,e){if(!(!a||a.nodeType==3||a.nodeType==8)){var c=e!==undefined;b=d.props[b]||b;if(a.tagName){var f=/href|src|style/.test(b);if(b in a&&!f){if(c)a[b]=e;return a[b]}c&&a.setAttribute(b,""+e);a=a.getAttribute(b);return a===null?undefined:a}b=b.replace(/-([a-z])/ig,function(g,h){return h.toUpperCase()});if(c)a[b]=e;return a[b]}},
swap:function(a,b,e){var c={};for(var f in b){c[f]=a.style[f];a.style[f]=b[f]}e.call(a);for(f in b)a.style[f]=c[f]},css:function(a,b,e,c){if(b=="width"||b=="height"){var f;e={position:"absolute",visibility:"hidden",display:"block"};var g=b=="width"?["Left","Right"]:["Top","Bottom"],h=function(){f=b=="width"?a.offsetWidth:a.offsetHeight;c!=="border"&&d.each(g,function(){c||(f-=parseFloat(d.curCSS(a,"padding"+this,true))||0);if(c==="margin")f+=parseFloat(d.curCSS(a,"margin"+this,true))||0;else f-=parseFloat(d.curCSS(a,
"border"+this+"Width",true))||0})};a.offsetWidth!==0?h():d.swap(a,e,h);return Math.max(0,Math.round(f))}return d.curCSS(a,b,e)},prop:function(a,b,e,c,f){if(d.isFunction(b))b=b.call(a,c);return typeof b==="number"&&e=="curCSS"&&!u.test(f)?b+"px":b},curCSS:function(a,b,e){var c,f=a.style;if(b.match(/float/i))b="cssFloat";if(!e&&f&&f[b])c=f[b];else if(t.getComputedStyle){if(b.match(/float/i))b="float";b=b.replace(/([A-Z])/g,"-$1").toLowerCase();if(a=t.getComputedStyle(a,null))c=a.getPropertyValue(b);
if(b=="opacity"&&c=="")c="1"}else if(a.currentStyle){c=b.replace(/\-(\w)/g,function(g,h){return h.toUpperCase()});c=a.currentStyle[b]||a.currentStyle[c];if(!/^\d+(px)?$/i.test(c)&&/^\d/.test(c)){b=f.left;e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;f.left=c||0;c=f.pixelLeft+"px";f.left=b;a.runtimeStyle.left=e}}return c}});d.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===undefined)return d.queue(this[0],a);return this.each(function(){var e=d.queue(this,a,
b);a=="fx"&&e.length==1&&e[0].call(this)})},dequeue:function(a){return this.each(function(){d.dequeue(this,a)})}});var n,s=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],v=d.fn.show,w=d.fn.hide;d.fn.extend({show:function(a,b){return a&&!d.isFunction(a)?this.animate(m("show",3),a,b):v.call(this,a)},hide:function(a,b){return a&&!d.isFunction(a)?this.animate(m("hide",3),a,b):w.call(this,a)},fadeTo:function(a,
b,e){return this.animate({opacity:b},a,e)},animate:function(a,b,e,c){var f=d.speed(b,e,c);return this[f.queue===false?"each":"queue"](function(){var g=d.extend({},f),h,q=this;for(h in a)if((h=="height"||h=="width")&&this.style){g.display=d.css(this,"display");g.overflow=this.style.overflow}if(g.overflow!=null)this.style.overflow="hidden";g.curAnim=d.extend({},a);d.each(a,function(r,o){var j=new d.fx(q,g,r);if(/show|hide/.test(o))j[o](a);else{var k=o.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),i=
j.cur(true)||0;if(k){var l=parseFloat(k[2]),p=k[3]||"px";if(p!="px"){q.style[r]=(l||1)+p;i=(l||1)/j.cur(true)*i;q.style[r]=i+p}if(k[1])l=(k[1]=="-="?-1:1)*l+i;j.custom(i,l,p)}else j.custom(i,o,"")}});return true})},stop:function(a,b){var e=d.timers;a&&this.queue([]);this.each(function(){for(var c=e.length-1;c>=0;c--)if(e[c].elem==this){b&&e[c](true);e.splice(c,1)}});b||this.dequeue();return this}});d.each({slideDown:m("show",1),slideUp:m("hide",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},
function(a,b){d.fn[a]=function(e,c){return this.animate(b,e,c)}});d.extend({speed:function(a,b,e){var c=typeof a==="object"?a:{complete:e||!e&&b||d.isFunction(a)&&a,duration:a,easing:e&&b||b&&!d.isFunction(b)&&b};c.duration=d.fx.off?0:typeof c.duration==="number"?c.duration:d.fx.speeds[c.duration]||d.fx.speeds._default;c.old=c.complete;c.complete=function(){c.queue!==false&&d(this).dequeue();d.isFunction(c.old)&&c.old.call(this)};return c},easing:{linear:function(a,b,e,c){return e+c*a},swing:function(a,
b,e,c){return(-Math.cos(a*Math.PI)/2+0.5)*c+e}},timers:[],fx:function(a,b,e){this.options=b;this.elem=a;this.prop=e;if(!b.orig)b.orig={}}});d.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(d.fx.step[this.prop]||d.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];
return(a=parseFloat(d.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(d.curCSS(this.elem,this.prop))||0},custom:function(a,b,e){function c(g){return f.step(g)}this.startTime=now();this.start=a;this.end=b;this.unit=e||this.unit||"px";this.now=this.start;this.pos=this.state=0;var f=this;c.elem=this.elem;if(c()&&d.timers.push(c)&&!n)n=setInterval(function(){for(var g=d.timers,h=0;h<g.length;h++)g[h]()||g.splice(h--,1);if(!g.length){clearInterval(n);n=undefined}},13)},show:function(){this.options.orig[this.prop]=
d.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());d(this.elem).show()},hide:function(){this.options.orig[this.prop]=d.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=now();if(a||b>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();a=this.options.curAnim[this.prop]=true;for(var e in this.options.curAnim)if(this.options.curAnim[e]!==
true)a=false;if(a){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(d.css(this.elem,"display")=="none")this.elem.style.display="block"}this.options.hide&&d(this.elem).hide();if(this.options.hide||this.options.show)for(var c in this.options.curAnim)d.attr(this.elem.style,c,this.options.orig[c]);this.options.complete.call(this.elem)}return false}else{e=b-this.startTime;this.state=e/this.options.duration;this.pos=d.easing[this.options.easing||
(d.easing.swing?"swing":"linear")](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};d.extend(d.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){d.attr(a.elem.style,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=a.now+a.unit;else a.elem[a.prop]=a.now}}})})(jQuery);