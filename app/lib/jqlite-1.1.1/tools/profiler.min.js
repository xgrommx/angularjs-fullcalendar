/*
 * Simple JavaScript profiler
 * (c) Copyright 2010 Brett Fattori
 * Licensed under MIT License
 *
 * @author Brett Fattori (bfattori@gmail.com)
 * @author $Author: bfattori $
 * @version $Revision: 104 $
 * @modified $Date: 2010-05-06 18:08:44 -0400 (Thu, 06 May 2010) $
 */
if(!window.Profiler){window.Profiler={profileStack:[],allProfiles:{},profiles:[]};Profiler.enter=function(a){var b=Profiler.allProfiles[a];if(b==null)b=Profiler.allProfiles[a]={name:a,startMS:new Date,execs:0,totalMS:0,instances:1,pushed:false};else{b.startMS=b.instances==0?new Date:b.startMS;b.instances++}Profiler.profileStack.push(b)};Profiler.exit=function(){if(Profiler.profileStack.length==0){typeof console!=="undefined"&&console.error("Profile stack underflow");throw"Profile stack underflow";
}var a=Profiler.profileStack.pop();a.endMS=new Date;a.execs++;a.instances--;a.totalMS+=a.instances==0?a.endMS.getTime()-a.startMS.getTime():0;if(!a.pushed){a.pushed=true;Profiler.profiles.push(a)}};Profiler.resetProfiles=function(){Profiler.profileStack=[];Profiler.allProfiles={};Profiler.profiles=[]};Profiler.dump=function(a){if(Profiler.profileStack.length>0){a="";for(var b in Profiler.profileStack)a+=(a.length>0?",":"")+b;throw"Profile stack overflow.  Running profiles: "+a;}var e=new Date;e=e.getHours()+
":"+e.getMinutes()+":"+e.getSeconds();var d=Profiler.profiles.reverse(),f=0;b="";for(var c in d){var g=Math.round(d[c].totalMS/d[c].execs);f+=d[c].totalMS;b+="# "+d[c].name+" | "+(d[c].totalMS<1?"<1":d[c].totalMS)+" ms | "+d[c].execs+" @ "+(g<1?"<1":g)+" ms\n"}b+="# Total Time: | "+f+" ms | \n";if(a){c="<table border='1' cellspacing='0' cellpadding='2'><tr><td colspan='3'>PROFILER RESULTS @ "+e+"</td></tr>";c+="<tr><th>Profile Name</th><th>Total</th><th>Execs @ Avg Time</th></tr>";b=b.replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(/#/g,"<tr><td>").replace(/\|/g,"</td><td>").replace(/\n/g,"</td></tr>");c+=b+"</table>";a.innerHTML=c}else{console.warn("PROFILER RESULTS @ "+e+"\n---------------------------------------------------\n");console.info(b)}Profiler.resetProfiles()}};